{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}List of dates{% endblock %}</h1>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
{% endblock %}

{% block content %}
<table class="table">
  <thead>
    <tr>
      <th scope="col">Date</th>
      <th scope="col">Count of all tasks</th>
      <th scope="col">Count of done tasks</th>
      <th scope="col" colspan="2">Percentage</th>
    </tr>
  </thead>
  {% for date in dates %}
  <tr>
    <td>{{ date['due_date'] }}</td>
    <td>{{ date['count_all'] }}</td>
    <td>{{ date['count_done'] }}</td>
    <td>{{ date['percentage'] }} %
      {% if not loop.last and date['percentage'] > loop.nextitem['percentage']  %}
      <td>ðŸ”¼</td>
      {% else %}
      <td>ðŸ”½</td>
      {% endif %}
    </td>
  </tr>

  {% endfor %}

</table>
<div id="chart">

</div>


<script>
  var options = {
    chart: {
      type: 'bar'
    },
    series: [{
      name: 'sales',
      data: [30,40,45,50,49,60,70,91,125]
    }],
    xaxis: {
      categories: [1991,1992,1993,1994,1995,1996,1997, 1998,1999]
    }
  }

  var chart = new ApexCharts(document.querySelector("#chart"), options);

  chart.render();
</script>
{% endblock %}
